<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#1E6FB8" />
<title>Asistencia IPUC Bochica Sur</title>

<link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">



<style>

html, body {
  overflow: hidden;
  height: 100%;
}

  
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #ffffff;           /* fondo blanco puro */
  color: #000;
  min-height: 100vh;
  position: relative;
}

/* MARCA DE AGUA ‚Üí AHORA S√ç SE VE PERFECTO */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: url('fondo.png') center center / 92% auto no-repeat;
  opacity: 0.20;                  /* ‚Üê aqu√≠ controlas cu√°nto se ve */
  pointer-events: none;
  z-index: -1;
}

/* En m√≥vil m√°s tenue */
@media (max-width: 768px) {
  body::before { opacity: 0.10; }   /* o 0.08 si quieres a√∫n m√°s suave */
}

 @media all and (display-mode: standalone) {
    body { background: #000 !important; }
  } 

header {
  background: rgba(30, 111, 184, 0.96); /* Un poco m√°s s√≥lido para que se lea bien sobre el fondo */
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.2);
}
.btnPrincipal {
  padding: 14px 22px;
  width: 100%;
  font-size: 20px;
  cursor: pointer;
  background: #1E6FB8;
  color: white;
  border: none;
  border-radius: 12px;
  margin-top: 20px;
}

  
/* SUBT√çTULO PRINCIPAL GRANDE Y MODERNO ‚Äì AHORA CON EFECTO CRISTAL */
#subtitulo {
  display: none;
  margin-top: 22px;
  margin-bottom: 10px;
  text-align: center;
  font-size: clamp(28px, 4vw, 44px);
  font-weight: 800;
  letter-spacing: 1.2px;
  color: #1E6FB8;
  background: rgba(255, 255, 255, 0.88);
  padding: 16px 24px;
  border-radius: 20px;
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.2;
  border: 1px solid rgba(255,255,255,0.3);
}
#subtitulo span {
  color: #000;
  font-weight: 900;
  text-transform: capitalize;
}

/* PANEL FIJO MODERNO ‚Äì MANTIENE SU ESTILO PERO CON MEJOR CONTRASTE */
.panel {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 14px 20px;
  background: rgba(30, 111, 184, 0.96);
  backdrop-filter: blur(12px);
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: nowrap;
  z-index: 9999;
  box-shadow: 0 -6px 20px rgba(0,0,0,0.25);
  border-top: 1px solid rgba(255,255,255,0.2);
}
/* BOTONES PROFESIONALES */
.panel button {
  padding: 10px 18px;
  font-size: 15px;
  border-radius: 10px;
  border: none;
  background: white;
  color: #1E6FB8;
  font-weight: 600;
  cursor: pointer;
  transition: 0.25s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.panel button:hover {
  background: #e6f1ff;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.panel button:active {
  transform: scale(0.97);
}

/* SELECT STYLE MODERNO */
.panel select {
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  background: #ffffff;
  font-weight: 600;
  color: #1E6FB8;
  box-shadow: 0 0 0 3px rgba(255,255,255,0.5);
  cursor: pointer;
  transition: 0.25s ease;
}

.panel select:hover {
  background: #e6f1ff;
}

/* √çCONO redondo moderno */
.btn-icono {
  width: 45px;
  height: 45px;
  background: transparent;
  color: #1E6FB8;
  border-radius: 50%;
  display: flex !important;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  transition: 0.25s ease;
  padding: 0 !important;

  /* üî• evita vibraci√≥n del panel */
  position: relative;
}

.btn-icono:hover {
  background: #e6f1ff;
  transform: translateY(-2px);

  /* üî• evita reflow y elimina el temblor */
  position: relative;
}


.btn-icono:active {
  transform: scale(0.93);
}

button {
  padding: 10px 15px;
  background: #1E6FB8;
  border: none;
  color: white;
  cursor: pointer;
  border-radius: 6px;
}

button:hover {
  background: #145893;
}

select {
  padding: 8px;
  border-radius: 5px;
}

/* TABLA CON EFECTO CRISTAL ‚Äì SE VE PERFECTA SOBRE CUALQUIER FONDO */
table {
  width: 95%;
  margin: 15px auto;
  border-collapse: collapse;
  background: rgba(255, 255, 255, 0.92);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 10px 35px rgba(0, 0, 0, 0.18);
  backdrop-filter: blur(10px);
}
th, td {
  padding: 8px;
  text-align: center;
  border: 1px solid #ccc;
  color: #000;
}

th {
  background: #cfe3ff;
  font-weight: bold;
}

.filaSel {
  background-color: #cbe0ff !important;
}

/* ================================================================= */
/* BOT√ìN DETENER POR ENCIMA DE TODO ‚Äì SOLUCI√ìN DEFINITIVA 2025      */
/* ================================================================= */
.panel button[onclick="proyectar()"] {
  position: relative !important;
  z-index: 9999 !important;                 /* ¬°MUCHO m√°s alto que cualquier cosa del panel! */
  isolation: isolate !important;
  overflow: hidden !important;
}

.boton-detener,
.panel button[onclick="proyectar()"].boton-detener {
  background: #c62828 !important;
  color: white !important;
  animation: pulsoFuerte 1.8s infinite ease-in-out !important;
  box-shadow: 0 6px 20px rgba(198, 40, 40, 0.5) !important;
  z-index: 9999 !important;
  position: relative !important;
}

.boton-detener::after {
  content: '' !important;
  position: absolute !important;
  top: 0; left: -100%; width: 50%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent) !important;
  transform: skewX(-25deg) !important;
  animation: brilloCruzado 1.8s infinite ease-in-out !important;
  pointer-events: none !important;
  z-index: 1 !important;
}

/* Pulso de sombra + peque√±o cambio de tono para que se sienta vivo */
@keyframes pulsoFuerte {
  0%, 100% {
    background: #c62828 !important;
    box-shadow: 0 6px 20px rgba(198,40,40,0.5);
  }
  50% {
    background: #e53935 !important;   /* rojo un poco m√°s claro en el medio */
    box-shadow: 0 10px 35px rgba(229,57,53,0.8);
  }
}

/* Brillo que cruza el bot√≥n ‚Äì esto es lo que hace que se note mucho */
@keyframes brilloCruzado {
  0%   { left: -100%; }
  50%  { left: 100%; }
  100% { left: 100%; }
}


  
/* Forzar que ning√∫n tema lo aplaste nunca m√°s */
body.tema-claro .boton-detener,
body.tema-oscuro .boton-detener,
body.tema-rosado .boton-detener,
body.tema-lila .boton-detener,
body.tema-beige .boton-detener,
body.tema-verde .boton-detener,
body.tema-gris .boton-detener,
body.tema-naranja .boton-detener {
  z-index: 9999 !important;
  position: relative !important;
}
  
.subtitulo-moderno {
  margin-top: 12px;
  text-align: center;
  font-weight: 700;
  font-size: clamp(22px, 3vw, 34px);
  color: #1E6FB8;
  letter-spacing: 0.5px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;

  padding: 10px 20px;
  background: linear-gradient(135deg, #e6f1ff, #d1e3ff);
  border-radius: 12px;
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.titulo-label {
  opacity: 0.9;
}

.titulo-mes {
  color: #1E6FB8;
  font-weight: 900;
}



/* ====================== AVISO MODERNO PERSONALIZADO ‚Äì COMPATIBLE CON TEMAS ====================== */
.aviso-contenedor {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
  color: var(--texto);
}
.aviso-contenedor.mostrar {
  opacity: 1;
  visibility: visible;
}
.aviso {
  background: var(--tabla-fondo, white);
  padding: 28px 32px;
  border-radius: 20px;
  max-width: 90%;
  width: 420px;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.3);
  transform: scale(0.9) translateY(20px);
  transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  color: var(--texto);
  border: 1px solid var(--borde, #ddd);
}
.aviso-contenedor.mostrar .aviso {
  transform: scale(1) translateY(0);
}
.aviso i {
  font-size: 48px;
  margin-bottom: 16px;
  display: block;
}
.aviso.exito i  { color: #28a745; }
.aviso.info i   { color: #58a6ff; }
.aviso.alerta i { color: #ffc107; }
.aviso.error i  { color: #f87171; }
.aviso h3 {
  margin: 0 0 12px;
  font-size: 22px;
  color: var(--acento);
}
.aviso p {
  margin: 0 0 20px;
  color: var(--texto);
  font-size: 16px;
  line-height: 1.5;
}
.aviso button {
  background: var(--acento);
  color: white;
  border: none;
  padding: 12px 28px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.25s;
}
.aviso button:hover {
  opacity: 0.9;
  transform: translateY(-2px);
}

/* Solo en modo oscuro: fondo del aviso m√°s oscuro y elegante */
body.tema-oscuro .aviso {
  background: #1e2533 !important;
  box-shadow: 0 15px 40px rgba(0,0,0,0.7);
  border-color: #30363d;
}
/* ====================== LOADER ULTRA MODERNO 2025 ====================== */
.loader-contenedor {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.82);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.loader-contenedor.activo {
  opacity: 1;
  visibility: visible;
}

/* Contenedor principal con efecto cristal */
.loader-box {
  text-align: center;
  padding: 40px 50px;
  border-radius: 32px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.18);
  backdrop-filter: blur(20px);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
              inset 0 0 40px rgba(255, 255, 255, 0.05);
  animation: flotarSuave 4s ease-in-out infinite;
}

/* Anillo principal con degradado ne√≥n */
.loader {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  background: conic-gradient(from 0deg, #1E6FB8, #58a6ff, #8b5cf6, #1E6FB8);
  position: relative;
  animation: girarNeon 2s linear infinite;
  filter: drop-shadow(0 0 20px #1E6FB8);
}

/* Centro brillante */
.loader::before {
  content: '';
  position: absolute;
  inset: 12px;
  background: radial-gradient(circle, #ffffff 0%, #f0f8ff 70%);
  border-radius: 50%;
  box-shadow: inset 0 0 30px rgba(30, 111, 184, 0.4);
}

/* Punto brillante que orbita */
.loader::after {
  content: '';
  position: absolute;
  top: -8px; left: 50%;
  width: 18px; height: 18px;
  background: #1E6FB8;
  border-radius: 50%;
  transform: translateX(-50%);
  box-shadow: 0 0 30px #1E6FB8, 0 0 60px #58a6ff;
  animation: orbita 2s linear infinite;
}

/* Part√≠culas flotantes (m√°gico toque final) */
.loader-box::before {
  content: '';
  position: absolute;
  inset: -20px;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ccircle cx='20' cy='20' r='3' fill='%231E6FB8' opacity='0.6'%3E%3Canimate attributeName='cy' values='20;80;20' dur='4s' repeatCount='indefinite'/%3E%3C/circle%3E%3Ccircle cx='50' cy='30' r='2.5' fill='%2358a6ff' opacity='0.7'%3E%3Canimate attributeName='cy' values='30;70;30' dur='3.5s' repeatCount='indefinite'/%3E%3C/circle%3E%3Ccircle cx='80' cy='40' r='2' fill='%238b5cf6' opacity='0.5'%3E%3Canimate attributeName='cy' values='40;90;40' dur='5s' repeatCount='indefinite'/%3E%3C/circle%3E%3C/svg%3E") repeat;
  border-radius: 50%;
  opacity: 0.3;
  animation: particulas 20s linear infinite;
}

/* Texto con brillo */
.loader-texto {
  margin-top: 28px;
  font-family: 'Poppins', 'Segoe UI', sans-serif;
  font-size: 20px;
  font-weight: 700;
  color: #ffffff;
  letter-spacing: 2px;
  text-shadow: 0 0 20px rgba(30, 111, 184, 0.8);
  animation: pulsoTexto 2.5s ease-in-out infinite;
}

/* Animaciones */
@keyframes girarNeon { to { transform: rotate(360deg); } }
@keyframes orbita { to { transform: translateX(-50%) rotate(360deg); } }
@keyframes flotarSuave { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
@keyframes pulsoTexto { 0%,100% { opacity: 0.8; } 50% { opacity: 1; text-shadow: 0 0 30px #1E6FB8; } }
@keyframes particulas { from { background-position: 0 0; } to { background-position: 100px 100px; } }

/* ==================== TEMAS CON DEGRADADOS + MEN√ö LATERAL 100% INTEGRADO ==================== */
body.tema-claro   { --fondo:linear-gradient(135deg, #f9fcff 0%, #e6f4ff 100%); --texto:#000000; --acento:#1E6FB8; --tabla-fondo:rgba(255,255,255,0.97); --tabla-texto:#000; --borde:#c8e0ff; --fila-sel:#a8d0ff; --menu-bg:rgba(255,255,255,0.96); --menu-texto:#1a1a1a; --menu-borde:rgba(0,0,0,0.08); --menu-sombra:rgba(0,0,0,0.15); }
body.tema-oscuro  { --fondo:linear-gradient(135deg, #0a0e17 0%, #161b22 60%, #1f2833 100%); --texto:#e6edf3; --acento:#58a6ff; --tabla-fondo:rgba(22,27,34,0.92); --tabla-texto:#ffffff; --borde:#30363d; --fila-sel:rgba(88,166,255,0.4); --menu-bg:rgba(15,23,36,0.98); --menu-texto:#e6edf3; --menu-borde:rgba(255,255,255,0.1); --menu-sombra:rgba(0,0,0,0.7); }
body.tema-rosado  { --fondo:linear-gradient(135deg, #fff0f6 0%, #ffe4f0 100%); --texto:#5d1738; --acento:#e91e63; --tabla-fondo:rgba(255,240,250,0.97); --tabla-texto:#5d1738; --borde:#f8b0d8; --fila-sel:#ff99cc; --menu-bg:rgba(255,245,252,0.97); --menu-texto:#5d1738; --menu-borde:rgba(233,30,99,0.15); --menu-sombra:rgba(233,30,99,0.12); }
body.tema-lila    { --fondo:linear-gradient(135deg, #f8f1ff 0%, #f0e0ff 100%); --texto:#4a1e6e; --acento:#a855f7; --tabla-fondo:rgba(245,235,255,0.97); --tabla-texto:#4a1e6e; --borde:#d8b0ff; --fila-sel:#c890ff; --menu-bg:rgba(250,245,255,0.97); --menu-texto:#4a1e6e; --menu-borde:rgba(168,85,247,0.15); --menu-sombra:rgba(168,85,247,0.12); }
body.tema-beige   { --fondo:linear-gradient(135deg, #fdf6f0 0%, #fef0e0 100%); --texto:#5d4037; --acento:#8d6e63; --tabla-fondo:rgba(253,248,240,0.97); --tabla-texto:#5d4037; --borde:#e8d0b8; --fila-sel:#d8b8a0; --menu-bg:rgba(253,248,240,0.97); --menu-texto:#5d4037; --menu-borde:rgba(141,110,99,0.15); --menu-sombra:rgba(141,110,99,0.1); }
body.tema-verde   { --fondo:linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); --texto:#164028; --acento:#22c55e; --tabla-fondo:rgba(240,253,244,0.97); --tabla-texto:#164028; --borde:#a0e8c0; --fila-sel:#70e090; --menu-bg:rgba(240,253,244,0.97); --menu-texto:#164028; --menu-borde:rgba(34,197,94,0.15); --menu-sombra:rgba(34,197,94,0.12); }
body.tema-gris    { --fondo:linear-gradient(135deg, #f8f9fa 0%, #e2e6ea 100%); --texto:#2d3748; --acento:#607d8b; --tabla-fondo:rgba(250,250,250,0.97); --tabla-texto:#37474f; --borde:#cfd8dc; --fila-sel:#a0a8b8; --menu-bg:rgba(248,249,250,0.97); --menu-texto:#2d3748; --menu-borde:rgba(96,125,139,0.15); --menu-sombra:rgba(96,125,139,0.1); }
body.tema-naranja { --fondo:linear-gradient(135deg, #fff8f0 0%, #ffe8d0 100%); --texto:#5d2f10; --acento:#fb923c; --tabla-fondo:rgba(255,245,230,0.97); --tabla-texto:#5d2f10; --borde:#ffcc88; --fila-sel:#ffaa70; --menu-bg:rgba(255,248,240,0.97); --menu-texto:#5d2f10; --menu-borde:rgba(251,146,60,0.15); --menu-sombra:rgba(251,146,60,0.12); }

/* HEADER Y PANEL */
header, .panel { 
  background: var(--acento) !important; 
  color: white !important; 
}
body.tema-oscuro header, 
body.tema-oscuro .panel { 
  background: linear-gradient(135deg, #161b22 0%, #1f2533 100%) !important; 
}
body.tema-oscuro .panel button,
body.tema-oscuro .panel select { 
  color: #000000 !important; 
}

/* TABLA EN MODO OSCURO */
body.tema-oscuro table,
body.tema-oscuro th,
body.tema-oscuro td {
  color: #ffffff !important;
  border-color: #444444 !important;
}

/* FONDO PRINCIPAL */
body {
  background: var(--fondo) !important;
  background-attachment: fixed !important;
  color: var(--texto) !important;
  min-height: 100vh;
}

/* ====================== MEN√ö LATERAL ‚Äì 100% INTEGRADO CON LOS TEMAS ====================== */
#menuLateral {
  background: var(--menu-bg) !important;
  color: var(--menu-texto) !important;
  border-left: 1px solid var(--menu-borde) !important;
  box-shadow: -10px 0 50px var(--menu-sombra) !important;
  backdrop-filter: blur(20px);
}
#menuLateral h3 { color: var(--acento) !important; }
#menuLateral p,
#menuLateral small { color: var(--menu-texto) !important; opacity: 0.95; }
#menuLateral [style*="border-top"] { border-color: var(--menu-borde) !important; }

/* Bot√≥n de tres puntitos ‚Äì tambi√©n usa los temas */
/* √çCONO DEL MEN√ö ‚Üí SOLO EL √çCONO, NADA M√ÅS */
#menuBtn {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
  border-radius: 0 !important;
  padding: 10px !important; /* solo para √°rea de toque */
}

    /* EFECTO HOVER BRUTAL (opcional pero queda de lujo) */
#menuBtn:hover {
  transform: scale(1.15) rotate(90deg);
  /*background: rgba(255,255,255,0.12) !important;*/
}


/* ==================== MODAL PROYECCI√ìN ‚Äì VERSI√ìN FINAL 100% PERFECTA (TEXTO NEGRO + ACENTO EN MENSAJE) ==================== */
#modalProyeccion > div {
  background: var(--menu-bg) !important;
  color: #000000 !important;                  /* ‚Üê TODO EL MODAL EN TEXTO NEGRO */
  border: 2px solid var(--acento) !important;
}

/* T√≠tulo */
#modalProyeccion h2 {
  color: var(--acento) !important;
  background: rgba(255,255,255,0.08) !important;
  border-bottom: 2px solid var(--acento) !important;
}

/* Tabla */
#modalProyeccion table {
  background: transparent !important;
}
#modalProyeccion th {
  background: var(--acento) !important;
  color: #ffffff !important;
  font-weight: 800;
}
#modalProyeccion td {
  color: #000000 !important;                  /* ‚Üê TODAS LAS CELDAS EN NEGRO */
}

/* L√çNEAS DE FILAS ‚Üí MISMO COLOR ACENTO QUE LAS COLUMNAS */
#modalProyeccion tbody tr {
  border-bottom: 1.5px solid var(--acento) !important;
  opacity: 0.5;
}

/* D√≠a de hoy */
#modalProyeccion tr[style*="background"] {
  background: var(--fila-sel) !important;
  font-weight: 800 !important;
  border-bottom: 2.5px solid var(--acento) !important;
}
#modalProyeccion tr[style*="background"] td {
  color: #000000 !important;                  /* ‚Üê HASTA EL D√çA DE HOY EN NEGRO */
  font-weight: 800;
}



/* ================= PANEL IZQUIERDO INTEGRADO CON TEMAS ================= */
#izq {
  background: var(--menu-bg) !important;
  color: var(--menu-texto) !important;
  border-right: 2px solid var(--menu-borde) !important;
}
#izq select,
#izq button,
#izq input {
  color: var(--menu-texto) !important;
  background: var(--tabla-fondo) !important;
  border-color: var(--borde) !important;
}
#izq i {
  color: var(--acento) !important;
}


/* ================================
   TEMA OSCURO ‚Äì Biblia y Predictivo
   ================================ */

/* Contenedor general de resultados */
.dark-mode #r .vers {
  background: #1c1c1c;
  border: 1px solid #333;
  color: #e8e8e8;
}

/* Hover */
.dark-mode #r .vers:hover {
  background: #2a2a2a;
}

/* Texto resaltado (verso buscado) */
.dark-mode .resaltado {
  background: #444;
  color: #fff;
  padding: 3px 4px;
  border-radius: 4px;
}

/* ==========================
   MODO OSCURO PARA .vers
   ========================== */
.app.dark .vers {
  background: #0f0f0f !important;   /* Fondo oscuro */
  border-color: #2b2b2b !important;
  color: #ffffff !important;        /* TEXTO BLANCO */
}

.app.dark .vers b {
  color: #ffffff !important;        /* Referencias en blanco */
}

.app.dark .vers:hover {
  background: #1c1c1c !important;   /* Hover oscuro pero claro */
}

/* Resaltado del verso buscado */
.app.dark .resaltado {
  background: #333 !important;
  color: #ffffff !important;
}


  
/* Contenedor del predictivo */
.app.dark #predictivo {
  background: #0f0f0f !important;
  border: 1px solid #2b2b2b !important;
  color: #ffffff !important;       /* TEXTO BLANCO */
}

.app.dark #predictivo div:hover {
  background: #1c1c1c !important;
  color: #ffffff !important;
}

/* Ghost inline */
.app.dark #ghost-typed {
  color: #ffffff !important;
  opacity: 0.35;
}

.app.dark #ghost-rest {
  color: #ffffff !important;
  opacity: 0.20;
}

  
  
/* MENSAJE FINAL "asignaciones cargadas" ‚Üí TEXTO EN COLOR ACENTO DEL TEMA (verde, azul, rosado, etc.) */
#modalProyeccion > div > div:last-child,
#proyeccionContenido > div:last-child {
  background: var(--fila-sel) !important;
  color: var(--acento) !important;     /* ‚Üê SOLO ESTE MENSAJE EN COLOR ACENTO */
  border: 1.8px solid var(--acento) !important;
  border-radius: 16px;
  padding: 18px;
  font-weight: 700;
  font-size: 16px;
  text-align: center;
  margin-top: 24px;
}

/* ==================== TEMA OSCURO ‚Äì SOLO NEGRO, GRIS Y BLANCO ‚Äì CONTRASTE M√ÅXIMO ==================== */
body.tema-oscuro #modalProyeccion > div {
  background: #0d1117 !important; /* Negro puro profesional */
  color: #ffffff !important; /* Todo el texto BLANCO puro */
  border: 2px solid #ffffff !important; /* Borde blanco brillante */
}
body.tema-oscuro #modalProyeccion h2 {
  color: #ffffff !important;
  border-bottom: 2px solid #ffffff !important;
  text-shadow: 0 0 10px rgba(255,255,255,0.3);
}
body.tema-oscuro #modalProyeccion th {
  background: #ffffff !important; /* Encabezado BLANCO */
  color: #000000 !important; /* Texto NEGRO en encabezado */
  font-weight: 900;
}
body.tema-oscuro #modalProyeccion td {
  color: #ffffff !important; /* ‚Üê FECHA, D√çA Y PERSONA: BLANCO PURO */
  font-weight: 600;
}
body.tema-oscuro #modalProyeccion tbody tr {
  border-bottom: 1.5px solid #444444 !important; /* Gris medio visible */
}
/* D√≠a de hoy ‚Äì resaltado en GRIS CLARO BRILLANTE */
body.tema-oscuro #modalProyeccion tr[style*="background"] {
  background: #303030 !important; /* Gris oscuro elegante */
  font-weight: 900 !important;
  border-bottom: 3px solid #ffffff !important; /* L√≠nea blanca gruesa */
  box-shadow: 0 0 15px rgba(255,255,255,0.15);
}
body.tema-oscuro #modalProyeccion tr[style*="background"] td {
  color: #ffffff !important; /* ‚Üê HASTA EL D√çA DE HOY: BLANCO PURO */
  font-weight: 900;
}
/* Mensaje final ‚Äì fondo gris, texto y borde blanco */
body.tema-oscuro #proyeccionContenido > div:last-child,
body.tema-oscuro #modalProyeccion > div > div:last-child {
  background: #222222 !important;
  color: #ffffff !important;
  border: 2px solid #ffffff !important;
  font-weight: 800;
}

/* === FORZADO EXTRA PARA QUE NUNCA SALGA GRIS (POR SI EL JS LO SOBREESCRIBE) === */
body.tema-oscuro #proyeccionContenido td,
body.tema-oscuro #proyeccionContenido tbody tr td {
  color: #ffffff !important;
}

  body.tema-oscuro #menuLateral svg[stroke="var(--acento)"] {
  stroke: #ffffff !important;
}


/* Resto de estilos (intactos) */
#subtitulo { background: var(--tabla-fondo) !important; color: var(--acento) !important; }
#subtitulo span { color: var(--texto) !important; }
table { background: var(--tabla-fondo) !important; color: var(--tabla-texto) !important; border-color: var(--borde) !important; }
th { background: color-mix(in srgb, var(--acento) 12%, var(--tabla-fondo)) !important; color: var(--tabla-texto) !important; }
td, th { border-color: var(--borde) !important; }
.filaSel { background-color: var(--fila-sel) !important; }
.panel button, .panel select { background: white !important; color: var(--acento) !important; }
.panel button:hover, .panel select:hover { background: #f0f4ff !important; }

/* ====== BOTONES DEL PANEL: TEXTO SIEMPRE NEGRO EN CUALQUIER TEMA ====== */
.panel button, .panel select {
  color: #000000 !important;
}
  
/* ====== MEN√ö SIEMPRE ENCIMA DE TODO ====== */
#menuBtn,
#menuLateral,
#menuOverlay {
  z-index: 999999 !important; /* ¬°EL M√ÅS ALTO POSIBLE! */
}

/* Aseguramos que el bot√≥n de men√∫ est√© por encima del header/panel */
#menuBtn {
  z-index: 999999 !important;
}


/* EFECTO HOVER PROFESIONAL PARA EL BOT√ìN DE PROYECCI√ìN */
#menuLateral div[onclick="abrirProyeccionDia()"]:hover > div:last-child {
  transform: scale(1.1);
  opacity: 0.25;
}
#menuLateral div[onclick="abrirProyeccionDia()"]:hover svg {
  stroke: white !important;
  transform: scale(1.15);
  filter: drop-shadow(0 0 8px var(--acento));
}
#menuLateral div[onclick="abrirProyeccionDia()"]:active {
  transform: scale(0.95);
}
  

/* --- AUTOCOMPLETADO INLINE (GHOST) --- */
#input-wrap { position:relative; }
#ghost { color: rgba(0,0,0,0.35); font-size:16px; }
#ghost-typed { color: transparent; }
#ghost-rest { opacity:0.55; }

body.tema-oscuro #ghost { color: rgba(255,255,255,0.35); }

/* --- LISTA PREDICTIVA OPCIONAL --- */
.predictivo {
  background:#fff;
  border:1px solid #aac;
  border-radius:8px;
  overflow:hidden;
  display:none;
  max-height:200px;
  overflow-y:auto;
}

.predictivo div {
  padding:8px;
  cursor:pointer;
  border-bottom:1px solid #eee;
}
.predictivo div:hover {
  background:#def;
}


  .resaltado {
  background: yellow;
  padding: 2px 4px;
  border-radius: 3px;
}



/* Contenedor principal ‚Äì sin cambios importantes */
#biblia-container {
  display: flex;
  align-items: stretch;     /* cambiado de flex-start a stretch */
  gap: 30px;
  width: 100%;
  height: calc(100vh - 160px);
  box-sizing: border-box;
  overflow: hidden;         /* evita cualquier desborde */
}

/* Panel izquierdo ‚Äì intacto y siempre visible */
#izq {
  flex-shrink: 0;
  width: 320px;
  min-width: 320px;
  max-height: 100vh;     /* üëâ evita que crezca m√°s que la pantalla */
  overflow-y: auto;      /* üëâ scroll solo dentro del panel */
  background: #fff;
  border-right: 2px solid #ddd;
  padding: 15px;
  font-size: 15px;
  box-sizing: border-box;
}


/* Contenedor de las dos pantallas ‚Äì ahora perfecto */
#pantallas-container {
  display: flex;
  gap: 30px;                /* separaci√≥n bonita entre pantallas */
  justify-content: center;
  align-items: center;
  flex: 1;                  /* ocupa TODO el espacio que sobra */
  padding: 0 20px;
  box-sizing: border-box;
  min-width: 0;             /* necesario para que flex funcione bien */
}

/* LAS PANTALLAS ‚Äì esta es la clave m√°gica que nunca falla */
.pantalla {
  flex: 1;                          /* cada pantalla ocupa el mismo espacio */
  max-width: 48%;                   /* nunca m√°s del 48% cada una ‚Üí caben seguro */
  min-width: 380px;                 /* tama√±o m√≠nimo legible */
  aspect-ratio: 16 / 9;
  background: var(--fondo);
  border: 4px solid #333;
  border-radius: 14px;
  padding: 2% 3%;
  box-shadow: 0 15px 40px rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;
  position: relative;
}

/* Texto perfectamente adaptativo y centrado */
.pantalla-texto {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-weight: 700;
  line-height: 1.15;
  white-space: pre-wrap;
  word-wrap: break-word;
  padding: 10px;
  box-sizing: border-box;
  font-size: clamp(1.8rem, 4.8vw, 6rem);   /* tama√±o ideal en cualquier pantalla */
}

.pantalla-texto .cita-mini {
  font-size: 0.5em;
  margin-top: 12px;
  opacity: 0.9;
  font-family: "Segoe UI Semilight", sans-serif;
}

/* En pantallas peque√±as: todo vertical y sigue funcionando perfecto */
@media (max-width: 1100px) {
  #biblia-container {
    flex-direction: column;
    gap: 15px;
    padding: 10px;
  }
  
  
  #pantallas-container {
    flex-direction: column;
    gap: 25px;
    padding: 0;
 
  }
  
  .pantalla {
    max-width: 95%;
    min-width: unset;
    width: 100%;
  }
}


/* Contenedor de cada vers√≠culo */
.vers {
  background: #fff;
  border: 1px solid #ddd;
  padding: 10px;
  margin: 6px 0;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.vers:hover {
  background: #f3f3f3;
}



/* Contenedor general de resultados (tema-aware) */
.resultados-biblia {
  margin-top: 20px;
  padding: 12px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  background: var(--tabla-fondo, #fdfdfd);  /* usa variable del tema, fallback claro */
  color: var(--tabla-texto, #222);          /* texto seg√∫n tema */
  transition: background .18s ease, color .18s ease;
  overflow: auto;
}

/* Cada vers√≠culo (tarjeta ligera) */
.resultados-biblia .vers {
  display: block;
  padding: 10px;
  margin-bottom: 8px;
  border-radius: 8px;
  background: transparent;     /* transparente por defecto, tema decide */
  color: inherit;              /* hereda color del contenedor */
  border: 1px solid transparent;
  cursor: pointer;
}

/* Hover claro */
.resultados-biblia .vers:hover {
  background: color-mix(in srgb, var(--acento) 8%, var(--tabla-fondo));
  border-color: color-mix(in srgb, var(--acento) 12%, var(--tabla-fondo));
}

/* Resaltado (verso buscado) */
.resultados-biblia .resaltado {
  background: yellow;
  color: black;
  padding: 2px 6px;
  border-radius: 4px;
}

/* ===== MODO OSCURO (usa tu clase/theme-flag) =====
   Ajusta la selector seg√∫n c√≥mo aplicas el tema: aqu√≠ uso body.tema-oscuro y .app.dark (ambos) */
body.tema-oscuro .resultados-biblia,
.app.dark .resultados-biblia {
  background: var(--tabla-fondo, #121212);   /* variable del tema (ya definida en tu CSS) */
  color: var(--tabla-texto, #eaeaea);
  box-shadow: 0 2px 6px rgba(0,0,0,0.6);
}

body.tema-oscuro .resultados-biblia .vers,
.app.dark .resultados-biblia .vers {
  background: transparent;   /* tarjetas transparentes sobre contenedor oscuro */
  color: inherit;
  border-color: rgba(255,255,255,0.04);
}

body.tema-oscuro .resultados-biblia .vers:hover,
.app.dark .resultados-biblia .vers:hover {
  background: rgba(255,255,255,0.03);
}

/* Verso resaltado en oscuro: mantener contraste */
body.tema-oscuro .resultados-biblia .resaltado,
.app.dark .resultados-biblia .resaltado {
  background: #ffda55;
  color: #000;
}

  
  
</style>
</head>
<body>

<header style="padding: 0 20px 10px 20px;
               position:sticky;
               top:0;
               z-index:999;
               overflow:hidden;">
  
  <!-- FILA 1: LOGO Y T√çTULO -->
  <div style="display:flex;align-items:center;justify-content:center;gap:22px;padding-top:14px;">
    <img src="logo.png" alt="Logo IPUC Bochica Sur"
         style="height:78px;width:78px;object-fit:cover;border-radius:50%;box-shadow:0 8px 25px rgba(0,0,0,0.5);border:4px solid rgba(255,255,255,0.35);transition:all .3s">
    
    <span style="font-family:'Poppins','Montserrat','Segoe UI',sans-serif;
                 font-size:34px;font-weight:800;letter-spacing:3.2px;
                 background:linear-gradient(90deg,#ffffff,#e0e7ff,#ffffff);
                 -webkit-background-clip:text;background-clip:text;
                 -webkit-text-fill-color:transparent;
                 text-shadow:0 3px 12px rgba(0,0,0,0.4);
                 text-transform:uppercase;">
      ASISTENCIA IPUC BOCHICA SUR
    </span>

    <!-- √çCONO MEN√ö A LA DERECHA -->
    <div id="menuBtn" 
         style="position:absolute;top:18px;right:18px;cursor:pointer;transition:transform .25s ease">
      <i class="fas fa-bars" style="font-size:38px;color:white;"></i>
    </div>
  </div>

  <!-- FILA 2: BOTONES -->
  <div style="margin-top:12px; width:100%; text-align:left; display:flex; gap:18px;">

    <!-- BOT√ìN CARGAR ASISTENCIA -->
    <button id="btnCargarAsistencia"
            style="background:none;border:none;color:white;font-size:18px;font-weight:600;cursor:pointer;font-family:'Poppins',sans-serif;">
      Cargar Asistencia
    </button>

    <!-- NUEVO BOT√ìN BIBLIA -->
    <button id="btnBiblia"
            style="background:none;border:none;color:white;font-size:18px;font-weight:600;cursor:pointer;font-family:'Poppins',sans-serif;">
      Biblia
    </button>

  </div>

</header>



<div id="biblia-container" 
     style="display:flex;width:100%;height:calc(100vh - 160px);overflow:hidden;align-items:stretch;">

    
  <!-- PANEL IZQUIERDO -->
 <div id="izq" style="width:clamp(260px, 25vw, 340px); background:#fff;
     border-right:2px solid #ddd; overflow-y:auto; padding:15px; font-size:15px">


   <!-- üîç BUSCADOR AGREGADO AQU√ç -->
<div style="background:#f0f8ff;padding:12px;border-radius:10px;
            box-shadow:0 2px 6px rgba(0,0,0,0.12);margin-bottom:15px">

  <!-- WRAPPER PARA AUTOCOMPLETADO INLINE (GHOST) -->
  <div style="position:relative;">
    <div id="input-wrap" style="position:relative;">

      <!-- INPUT REAL -->
      <input type="text" id="q" placeholder="Juan 3:16 | Salmos 23 | amor"
             autocomplete="off"
             style="padding:10px;font-size:16px;width:100%;border-radius:8px;
                    border:2px solid #aac;font-family:'Segoe UI',sans-serif;
                    position:relative;background:transparent;z-index:2;">

      <!-- GHOST (texto sombreado dentro del input) -->
      <div id="ghost" aria-hidden="true"
           style="position:absolute;left:2px;top:0;bottom:0;padding:10px;font-size:16px;width:100%;
                  pointer-events:none;z-index:1;color:rgba(0,0,0,0.35);
                  font-family:'Segoe UI',sans-serif;display:flex;
                  align-items:center;white-space:nowrap;overflow:hidden;">
        <span id="ghost-typed" style="color:transparent;"></span>
        <span id="ghost-rest"></span>
      </div>

    </div>

    <!-- LISTA PREDICTIVA OPCIONAL -->
    <div id="predictivo" class="predictivo"
         style="position:absolute;left:0;right:0;top:56px;z-index:10;"></div>
  </div>

  <!-- BOT√ìN BUSCAR -->
  <button onclick="buscar()" 
          style="padding:10px;font-size:16px;width:100%;margin-top:8px;
                 background:#0066cc;color:white;border:none;border-radius:8px;
                 font-weight:bold">
    Buscar
  </button>

  <div id="status" class="ok" 
       style="font-size:12px;text-align:center;color:#0066cc;margin-top:6px;">
    Cargando Biblia completa...
  </div>
</div>
<!-- üîç FIN DE BUSCADOR -->


  <!-- √çcono Biblia + Combo -->
<div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
    <i class="fa-solid fa-book-open" style="font-size:1.6em;color:#0066cc;"></i>

    <select id="combo-libros" style="padding:6px;font-size:1em;">
        <option value="">Selecciona un libro...</option>
    </select>
</div>

<!-- Mant√©n este DIV, pero ya NO mostrar√° los libros -->
<div id="lista-libros"></div>


<!-- RESULTADO DE LA B√öSQUEDA DE VERS√çCULOS -->
<div id="r" class="resultados-biblia"></div>

    
  </div>

 <div id="pantallas-container"  style="margin-top:40px;">

  <!-- PREVIEW -->
  <div class="pantalla" id="preview-biblia">
   
    <div class="pantalla-texto" id="preview-texto"></div>
  </div>

  <!-- PROYECCI√ìN -->
  <div class="pantalla" id="proyeccion-biblia">
   
    <div class="pantalla-texto" id="proyeccion-texto"></div>
  </div>

</div>


</div>




  <div id="s" onclick="cerrar()" style="position:fixed;top:0;left:0;width:100vw;
height:100vh;background:#000;color:#fff;font-size:7vw;display:none;
align-items:center;justify-content:center;text-align:center;padding:5%;
line-height:2;z-index:99;">
  <div id="t"></div>
</div>

<button class="x" onclick="cerrar()" 
  style="position:fixed;top:15px;right:15px;padding:15px 28px;font-size:40px;
  background:#c00;color:#fff;border-radius:50%;display:none;z-index:100;cursor:pointer">
  X
</button>

  


<div id="subtitulo" class="subtitulo-moderno">
  <span class="titulo-label">Asistencia de:</span>
  <span id="mesActual" class="titulo-mes"></span>
</div>


<!-- üîΩ TABLA ARRIBA -->
<table id="tabla">
  <thead></thead>
  <tbody></tbody>
</table>

<!-- üîΩ PANEL AHORA ABAJO -->
<div class="panel">
  <button onclick="verMesActual()">
    <i class="fa-solid fa-calendar-days"></i> Mes Actual
  </button>

  <button onclick="verHoy()">
    <i class="fa-solid fa-calendar-check"></i> Hoy
  </button>

  <select id="selectMes"></select>

  <select id="pantallaSelect">
    <option>Selecciona pantalla</option>
  </select>

  <button onclick="proyectar()">
    <i class="fa-solid fa-display"></i> Proyectar
  </button>

  <!-- BOT√ìN DE TEMAS -->
<button id="btnTema" class="btn-icono" title="Cambiar tema">
  <i class="fa-solid fa-palette"></i>
  
 


</button>
  
</div>

  <div style="height: 120px;"></div>

<!-- AVISO PERSONALIZADO -->
<div id="avisoContenedor" class="aviso-contenedor">
  <div class="aviso" id="aviso">
    <i id="avisoIcono"></i>
    <h3 id="avisoTitulo">T√≠tulo</h3>
    <p id="avisoMensaje">Mensaje aqu√≠</p>
    <button onclick="cerrarAviso()">Aceptar</button>
  </div>
</div>


<!-- LOADER ULTRA MODERNO 2025 -->
<div id="loaderContenedor" class="loader-contenedor">
  <div class="loader-box">
    <div class="loader"></div>
    <div class="loader-texto" id="loaderTexto">Cargando...</div>
  </div>
</div>





<!-- Overlay -->
<div id="menuOverlay" style="position:fixed;inset:0;background:rgba(0,0,0,0.60);backdrop-filter:blur(8px);opacity:0;visibility:hidden;transition:all .4s;z-index:999997"></div>

<!-- MEN√ö LATERAL RESPONSIVE -->
<div id="menuLateral" style="position:fixed;top:0;right:-100%;width:340px;max-width:92vw;height:100vh;background:rgba(15,25,45,0.98);backdrop-filter:blur(20px);border-left:1px solid rgba(255,255,255,0.1);box-shadow:-10px 0 50px rgba(0,0,0,0.7);transition:right .45s cubic-bezier(0.22,1,0.36,1);z-index:999998;padding:16px 20px;overflow-y:auto;color:white;font-family:'Poppins',sans-serif;box-sizing:border-box">

<!-- Bot√≥n Proyecci√≥n + Cerrar -->
<div style="display:flex;justify-content:space-between;align-items:center;padding:0 16px;margin-bottom:12px">

  <!-- BLOQUE IZQUIERDO: Proyector + nuevo icono -->
  <div style="display:flex;gap:12px;align-items:center">

      <!-- BOT√ìN PROYECCI√ìN -->
      <div onclick="abrirProyeccionDia()" 
          style="cursor:pointer;padding:16px;border-radius:50%;transition:all .4s ease;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center">
          
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--acento)" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" style="z-index:2;position:relative;transition:all .4s">
            <rect x="3" y="5" width="15" height="11" rx="2"/>
            <path d="M18 7v8a2 2 0 0 1-2 2H8"/>
            <circle cx="12" cy="10.5" r="2.5"/>
            <path d="M12 13v4"/>
            <path d="M7 19h10"/>
            <path d="M9 19v-3"/>
            <path d="M15 19v-3"/>
          </svg>

          <div style="position:absolute;inset:0;border-radius:50%;background:var(--acento);transform:scale(0);transition:transform .5s ease"></div>
      </div>

      <!-- √çCONO AWESOME AL LADO DEL PROYECTOR -->
      <button class="btn-icono" onclick="Pantallas()">
        <i class="fa-solid fa-tv"></i>
      </button>
  </div>

  <!-- BOT√ìN CERRAR (SIN TOCAR) -->
  <div onclick="cerrarMenu()" style="cursor:pointer;padding:8px;border-radius:50%;background:rgba(255,255,255,0.12);transition:all .3s">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="black">
      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    </svg>
  </div>

</div>


  <!-- SOBRE NOSOTROS -->
  <div style="background:rgba(255,255,255,0.08);border-radius:16px;padding:18px;margin-bottom:18px;border:1px solid rgba(255,255,255,0.12);box-shadow:0 6px 24px rgba(0,0,0,0.3)">
    <h3 style="margin:0 0 12px;font-size:18px;color:#58a6ff;font-weight:700">Sobre Nosotros</h3>
    <p style="margin:0 0 14px;font-size:14px;line-height:1.6;opacity:0.95">
      Somos el <strong>Departamento de Comunicaciones (DECOM)</strong> de la Iglesia Pentecostal Unida de Colombia ‚Äì Bochica Sur.
    </p>
    <p style="margin:0 0 14px;font-size:14px;line-height:1.6;opacity:0.95">
      Con amor y dedicaci√≥n, nos encargamos de la publicidad, la tecnolog√≠a, los medios audiovisuales y todo lo necesario para que la Palabra de Dios llegue con excelencia a cada coraz√≥n.
    </p>
    <p style="margin:0;font-size:14px;line-height:1.6;opacity:0.95">
      <strong>Servimos a Dios y a Su iglesia con pasi√≥n y compromiso.</strong>
    </p>
    <div style="margin-top:18px;padding-top:14px;border-top:1px solid rgba(255,255,255,0.15)">
      <p style="margin:0;font-style:italic;font-size:13.5px;color:#a8d8ff;line-height:1.55">
        <strong>‚ÄúTodo lo que hag√°is, hacedlo de coraz√≥n, como para el Se√±or y no para los hombres‚Äù</strong><br>
        <small>‚Äî Colosenses 3:23</small>
      </p>
    </div>
  </div>

  <!-- SOPORTE WHATSAPP -->
  <a href="https://wa.me/573202897214?text=¬°Hola!%20Necesito%20ayuda%20con%20la%20app%20de%20asistencia%20IPUC%20Bochica%20Sur%20" target="_blank"
     style="display:flex;align-items:center;justify-content:center;gap:12px;background:#25D366;color:white;padding:15px 20px;border-radius:16px;font-size:16px;font-weight:700;text-decoration:none;box-shadow:0 8px 25px rgba(37,211,102,0.4);transition:all .3s;margin-bottom:18px">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.297-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.884 3.488"/>
    </svg>
    Soporte por WhatsApp
  </a>

  <!-- CR√âDITOS FINALES -->
  <div style="margin-top:16px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.15);text-align:center;font-size:12.5px;opacity:0.7;line-height:1.55">
    <strong>Desarrollado por</strong><br>
    Deimer Herrera<br>
    <span style="color:#58a6ff;font-weight:700">DEHETRONICS</span><br>
   <span style="font-size:15px;font-weight:700;color:#black;opacity:0.9">Versi√≥n 1.0</span><br><br>
    ¬© 2025 DECOM IPUC Bochica Sur<br>
    Todos los derechos reservados para la gloria de Dios
  </div>


  
</div>

<!-- MODAL PROYECCI√ìN ‚Äì AHORA 100% CON TEMAS -->
<div id="modalProyeccion" style="position:fixed;inset:0;background:rgba(0,0,0,0.92);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;z-index:999999;padding:20px">
  <div style="border-radius:28px;max-width:720px;width:95%;max-height:92vh;overflow:hidden;display:flex;flex-direction:column;position:relative">
    
    <!-- BOT√ìN CERRAR X -->
    <div onclick="cerrarProyeccion()" style="position:absolute;top:12px;right:12px;cursor:pointer;font-size:30px;z-index:20;padding:10px;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center">
      X
    </div>

    <h2 style="margin:0;padding:28px 60px 18px 28px;text-align:center;font-size:29px;font-weight:900;border-bottom:2px solid transparent">
      Cronograma de Proyecci√≥n
    </h2>

    <div id="proyeccionContenido" style="flex:1;overflow-y:auto;padding:24px 28px 32px;font-size:17px;line-height:1.8">
      Cargando cronograma...
    </div>
  </div>
</div>







  
<script>
const URL = "https://script.google.com/macros/s/AKfycbwuad6LbOg5k2TFzphjhPTm-NwMJwURzhfFPsEb8a5oB9KXuXIhWxe5QzrR2xLnDjYVlA/exec";
const meses = [
  "Enero","Febrero","Marzo","Abril","Mayo","Junio",
  "Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"
];

let filaSeleccionada = null;
let ventanaProyeccion = null;
  let yaEstaHoyCargado = false;        // ‚Üê indica si ya mostramos la asistencia de hoy
let intervaloPolling = null;         // ‚Üê para poder detenerlo cuando ya est√©

const URL_PROYECCION = "https://script.google.com/macros/s/AKfycbxf8jUb2catO-d_Fs0l7jfilwNiPXh8pqxMJ6sBUeCGvsOX0_1PE98w8U7-sm4UzUxA/exec";


let biblia = {};
let books = [];

// üöÄ Al iniciar: intentar cargar desde localStorage
document.addEventListener("DOMContentLoaded", () => {
  const bibliaGuardada = localStorage.getItem("biblia_json");

  if (bibliaGuardada) {
    console.log("‚úî Biblia cargada desde memoria local");
    cargarBiblia(JSON.parse(bibliaGuardada));
  } else {
    console.log("‚¨á Descargando Biblia por primera vez...");
    descargarBiblia();
  }
});

function descargarBiblia() {
  fetch("RV1960_COMPLETA.json?" + Date.now())
    .then(r => r.json())
    .then(json => {
      // üíæ Guardar JSON en localStorage UNA sola vez
      localStorage.setItem("biblia_json", JSON.stringify(json));

      console.log("‚úî Biblia guardada permanentemente");
      cargarBiblia(json);
    })
    .catch(err => {
      document.getElementById("status").textContent =
        "‚ùå No se pudo cargar la Biblia (sin conexi√≥n)";
      console.error(err);
    });
}

function cargarBiblia(json) {
  books = json.books;
  const combo = document.getElementById("combo-libros");
combo.innerHTML = `<option value="">Selecciona un libro...</option>`;

// Llenar combo sin afectar nada m√°s
books.forEach((libro, i) => {
  const op = document.createElement("option");
  op.value = i;
  op.textContent = libro.name;
  combo.appendChild(op);
});

// Evento cuando el usuario elige un libro
combo.onchange = () => {
  if (combo.value !== "") {
    mostrarCapitulos(parseInt(combo.value));
  }
};

// Ya NO se usa lista-libros para libros, pero lo mantenemos vac√≠o
document.getElementById("lista-libros").innerHTML = "";


  // üß† Crear √≠ndice de b√∫squeda
  let contador = 0;
  biblia = {}; // reset

  books.forEach(libro => {
    libro.chapters.forEach(cap => {
      cap.verses.forEach(v => {
        const ref = `${libro.name} ${cap.chapter}:${v.verse}`;
        biblia[ref.toLowerCase()] = v.text;
        contador++;
      });
    });
  });

  document.getElementById("status").innerHTML =
    `‚úî Biblia lista (${contador.toLocaleString()} vers√≠culos)`;
}

// =============================
//    RESTO: NO CAMBIA NADA
// =============================

function mostrarCapitulos(i) {
  const libro = books[i];
  const lista = document.getElementById("lista-libros");

  lista.innerHTML = `<div class="libro" onclick="cerrarCapitulos()"
 
    style="background:#0066cc;color:#fff">‚Üê ${libro.name}</div>`;

  libro.chapters.forEach(cap => {
    const div = document.createElement("div");
    div.className = "capitulo";
    div.textContent = `Cap√≠tulo ${cap.chapter}`;
    div.onclick = () =>
      mostrarVersiculos(libro.name, cap.chapter, cap.verses);
    lista.appendChild(div);
  });
}

function mostrarVersiculos(nombre, cap, versiculos) {
  const r = document.getElementById("r");
  r.innerHTML = `<h3 style="color:#0066cc">${nombre} ${cap}</h3>`;

  versiculos.forEach(v => {
    const ref = `${nombre} ${cap}:${v.verse}`;
    r.innerHTML += `<div class="vers" onclick="ver('${ref}')">
    <b>${v.verse}</b> ${v.text}</div>`;
  });
}

function buscar() {
  const q = document.getElementById("q").value.trim().toLowerCase();
  const r = document.getElementById("r");
  r.innerHTML = "";

  if (!q) return;

  const tieneCapitulo = /\d+\s*:\s*\d+/.test(q);
  let resultados = [];

  let versoBuscado = null; // para scroll autom√°tico

  if (tieneCapitulo) {
    // ===============================
    // üìå MODO: libro + cap√≠tulo + verso
    // ‚Üí mostrar CAP√çTULO COMPLETO
    // ===============================

    let partes = q.split(" ");
    let libro = "";
    let cap = "";
    let verso = "";

    if (!isNaN(partes[0])) {
      // Ej: "1 juan 3:14"
      libro = partes[0] + " " + partes[1];
      cap = partes[2].split(":")[0];
      verso = partes[2].split(":")[1];
    } else {
      // Ej: "juan 1:14"
      libro = partes[0];
      cap = partes[1].split(":")[0];
      verso = partes[1].split(":")[1];
    }

    versoBuscado = parseInt(verso);
    libro = libro.trim();

    const prefijo = libro + " " + cap + ":";

    // Buscar TODO el cap√≠tulo
    for (let ref in biblia) {
      if (ref.toLowerCase().startsWith(prefijo)) {
        resultados.push(ref);
      }
    }

    if (resultados.length === 0) {
      r.innerHTML = "<i>No encontrado</i>";
      return;
    }

    // Ordenar los versos
    resultados.sort((a, b) => {
      let va = parseInt(a.split(":")[1]);
      let vb = parseInt(b.split(":")[1]);
      return va - vb;
    });

    // Mostrar cap√≠tulo completo
    resultados.forEach(ref => {
      const versoNumero = parseInt(ref.split(":")[1]);
      const marca = versoNumero === versoBuscado ? "id='scroll-aqui'" : "";

      // üî• Nuevo: resaltar el verso buscado
      const texto = versoNumero === versoBuscado
        ? `<span class="resaltado">${biblia[ref]}</span>`
        : biblia[ref];

      r.innerHTML += `
        <div class="vers" onclick="ver('${ref}')" ${marca}>
          <b>${ref}</b><br>${texto}
        </div>`;
    });

    // ===============================
    // üìå SCROLL AUTOM√ÅTICO AL VERSO
    // ===============================
    setTimeout(() => {
      const destino = document.getElementById("scroll-aqui");
      if (destino) {
        destino.scrollIntoView({ behavior: "smooth", block: "center" });
      }
    }, 100);

    return;
  }

  // =================================
  // üìå MODO NORMAL (sin cap√≠tulo)
  // =================================
  for (let ref in biblia) {
    let refLower = ref.toLowerCase();
    if (refLower.includes(q) || biblia[ref].toLowerCase().includes(q)) {
      resultados.push(ref);
    }
    if (resultados.length > 120) break;
  }

  if (resultados.length === 0) {
    r.innerHTML = "<i>No encontrado</i>";
    return;
  }

  resultados.forEach(ref => {
    r.innerHTML += `<div class="vers" onclick="ver('${ref}')">
      <b>${ref}</b><br>${biblia[ref]}
    </div>`;
  });
}




// ==========================
// Autocompletado inline (ghost) para #q
// ==========================
(function() {
  const input = document.getElementById("q");
  const ghostTyped = document.getElementById("ghost-typed");
  const ghostRest = document.getElementById("ghost-rest");
  const predictivo = document.getElementById("predictivo");

  if (!input) return;

  // Buscar la mejor coincidencia exacta empezando por lo escrito
  function mejorCoincidencia(texto) {
    const q = texto.toLowerCase().trim();
    if (!q) return null;

    let best = null;

    for (let ref in biblia) {
      const lower = ref.toLowerCase();

      if (lower.startsWith(q)) {
        best = ref;
        break;
      }

      if (!best && lower.includes(q)) {
        best = ref;
      }
    }
    return best;
  }

  // Actualiza el ghost
  function actualizarGhost() {
    const val = input.value || "";
    const caretAtEnd =
      input.selectionStart === input.selectionEnd &&
      input.selectionStart === val.length;

    const match = mejorCoincidencia(val);
    if (!match || !val || !caretAtEnd) {
      ghostTyped.textContent = "";
      ghostRest.textContent = "";
      predictivo.style.display = "none";
      return;
    }

    if (match.toLowerCase() === val.toLowerCase()) {
      ghostTyped.textContent = "";
      ghostRest.textContent = "";
      return;
    }

    const matchLower = match.toLowerCase();
    const typedLen = val.length;

    if (matchLower.startsWith(val.toLowerCase())) {
      ghostTyped.textContent = val;
      ghostRest.textContent = match.slice(typedLen);
    } else {
      ghostTyped.textContent = "";
      ghostRest.textContent = "";
    }

    // Mostrar predictivo dropdown
    predictivo.innerHTML = `<div onclick="document.getElementById('q').value='${match}';buscar();">
      ${match}
    </div>`;
    predictivo.style.display = "block";
  }

  // Aceptar sugerencia
  function aceptarGhost() {
    const typed = input.value || "";
    const match = mejorCoincidencia(typed);

    if (!match) return false;

    if (match.toLowerCase().startsWith(typed.toLowerCase())) {
      input.value = match;
      input.setSelectionRange(input.value.length, input.value.length);
      actualizarGhost();
      return true;
    }
    return false;
  }

  // INPUT LISTENER
  input.addEventListener("input", actualizarGhost);

  // Teclas especiales
  input.addEventListener("keydown", (e) => {
    if (e.key === "Tab" || e.key === "ArrowRight") {
      const caretAtEnd =
        input.selectionStart === input.selectionEnd &&
        input.selectionStart === (input.value || "").length;

      if (caretAtEnd && ghostRest.textContent) {
        e.preventDefault();
        aceptarGhost();
      }
    }

    if (e.key === "Escape") {
      ghostTyped.textContent = "";
      ghostRest.textContent = "";
      predictivo.style.display = "none";
    }

    if (e.key === "Enter") {
      const caretAtEnd =
        input.selectionStart === input.selectionEnd &&
        input.selectionStart === (input.value || "").length;

      if (ghostRest.textContent && caretAtEnd) {
        e.preventDefault();
        aceptarGhost();
        buscar();
      } else {
        buscar();
      }
    }
  });

  input.addEventListener("blur", () => {
    setTimeout(() => {
      predictivo.style.display = "none";
    }, 150);
  });

})();


function cerrarCapitulos() {
  const combo = document.getElementById("combo-libros");
  const lista = document.getElementById("lista-libros");

  // Volver a estado inicial del combobox
  combo.value = "";

  // Vaciar cap√≠tulos
  lista.innerHTML = "";
}

  

// ====== FUNCI√ìN PRINCIPAL: AL TOCAR UN VERS√çCULO EN BIBLIA ======
function ver(ref) {
  const contenedorTexto = document.getElementById("t");
  const key = ref.toLowerCase();

contenedorTexto.innerHTML = `
  <div style="font-size:1.5em;color:#ff0">${ref}</div><br>${biblia[key]}
`;

 
  // ---- NUEVO: PREVIEW LOCAL ----
  renderPantallaLocal("preview-texto", ref, biblia[key]);

  // ---- NUEVO: PROYECCI√ìN LOCAL (copia en miniatura) ----
  renderPantallaLocal("proyeccion-texto", ref, biblia[key]);

  // Solo si estamos en la secci√≥n Biblia ‚Üí proyectar autom√°ticamente
  if (document.getElementById("biblia-container").style.display !== "none") {
   proyectarBiblia(ref, biblia[key]);

  }
}

// ====== PROYECCI√ìN AUTOM√ÅTICA DE BIBLIA (con pantalla seleccionada) ======
async function proyectarBiblia(referencia, texto) {
  // Si ya hay ventana abierta ‚Üí solo actualiza contenido
  if (ventanaProyeccion && !ventanaProyeccion.closed) {
    actualizarVentanaBiblia(referencia, texto);
    return;
  }

  // Si no hay ventana ‚Üí la abre (con pantalla seleccionada)
  await abrirVentanaBiblia(referencia, texto);
}

async function abrirVentanaBiblia(ref, texto) {
  let scr = null;

  // === RESPETAR LA PANTALLA SELECCIONADA (igual que asistencia) ===
  if ("getScreenDetails" in window) {
    try {
      const details = await window.getScreenDetails();  // ‚Üê AQU√ç ESTABA EL ERROR ANTES
      const indexPantalla = parseInt(document.getElementById("pantallaSelect").value);
      if (!isNaN(indexPantalla) && details.screens[indexPantalla]) {
        scr = details.screens[indexPantalla];
      }
    } catch (e) {
      console.warn("No se pudo obtener pantalla:", e);
    }
  }

  const features = scr
    ? `left=${scr.left},top=${scr.top},width=${scr.width},height=${scr.height},fullscreen=yes`
    : `width=1200,height=700`;

  ventanaProyeccion = window.open("", "proyeccion", features + ",scrollbars=no");

  // Aplicar contenido
  actualizarVentanaBiblia(ref, texto);

  // Detectar cierre autom√°tico
  const timer = setInterval(() => {
    if (!ventanaProyeccion || ventanaProyeccion.closed) {
      clearInterval(timer);
      ventanaProyeccion = null;
    }
  }, 500);
}


  
function actualizarVentanaBiblia(ref, texto) {
  if (!ventanaProyeccion || ventanaProyeccion.closed) return;

  // üëâ Separa solo por un punto
  // La cita va m√°s peque√±a en un <span>
  const textoFinal = `${texto} <span class="cita-mini">${ref}</span>`;


  const vars = {
    fondo: getComputedStyle(document.body).getPropertyValue("--fondo").trim(),
    acento: getComputedStyle(document.body).getPropertyValue("--acento").trim(),
    texto: getComputedStyle(document.body).getPropertyValue("--texto").trim()
  };

  ventanaProyeccion.document.body.innerHTML = `
  <style>
    :root { --fondo:${vars.fondo}; --acento:${vars.acento}; --texto:${vars.texto}; }

    html, body {
      margin:0;
      padding:0;
      width:100vw;
      height:100vh;
      overflow:hidden;
      background:var(--fondo);
      color:var(--texto);
      font-family:'Segoe UI', sans-serif;
    }

    .biblia-wrapper {
      width:100%;
      height:100%;
      padding:5vh 4vw 5vh 4vw;
      display:flex;
      justify-content:center;
      align-items:center;
      box-sizing:border-box;
    }

    .biblia-texto {
      display:block;
      width:100%;
      max-height:100%;

      text-align:center;
      font-weight:700;
      line-height:1.12;

      /* NO cortar palabras */
      white-space:pre-wrap;
      overflow-wrap:break-word;

      /* Tama√±o inicial gigante */
      font-size:25vw;
    }

    /* Cita m√°s peque√±a y distinta fuente */
    .cita-mini {
      font-size:0.65em;                 /* 65% del tama√±o del vers√≠culo */
      font-family: "Segoe UI Semilight";
      opacity:0.85;
    }
  </style>

  <div class="biblia-wrapper">
    <div id="textoAutoFit" class="biblia-texto">${textoFinal}</div>
  </div>
  `;

  // ====================================
  //         AUTO-FIT AGRESIVO
  // ====================================
  const caja = ventanaProyeccion.document.getElementById("textoAutoFit");

  function autoFit() {
    let min = 20;
    let max = 900;       // üî• Muy grande para permitir tama√±os gigantes
    let best = min;

    // √Årea mejorada para versi√≥n PRO
    const maxW = ventanaProyeccion.innerWidth * 0.95;
    const maxH = ventanaProyeccion.innerHeight * 0.92;

    while (min <= max) {
      let mid = Math.floor((min + max) / 2);
      caja.style.fontSize = mid + "px";

      const fits =
        caja.scrollWidth  <= maxW &&
        caja.scrollHeight <= maxH;

      if (fits) {
        best = mid;
        min = mid + 2;     // seguir creciendo
      } else {
        max = mid - 2;     // demasiado grande, bajar
      }
    }

    caja.style.fontSize = best + "px";
  }

  autoFit();
}



function renderPantallaLocal(contenedor, ref, texto) {
  const el = document.getElementById(contenedor);
  if (!el) return;

  // Formatear igual que la proyecci√≥n real
  const textoFinal = `${texto} <span class="cita-mini">${ref}</span>`;

  el.innerHTML = `
    <div class="biblia-wrapper-local">
      <div id="textoAutoFitLocal" class="biblia-texto-local">${textoFinal}</div>
    </div>
    <style>
      .biblia-wrapper-local {
        width: 100%;
        height: 100%;
        padding: 5% 4%;
        display: flex;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
      }

      .biblia-texto-local {
        display: block;
        width: 100%;
        max-height: 100%;
        text-align: center;
        font-weight: 700;
        line-height: 1.12;
        white-space: pre-wrap;
        overflow-wrap: break-word;
        font-size: 25vw; /* inicial gigante para auto-fit */
      }

      .cita-mini {
        font-size: 0.65em;
        font-family: "Segoe UI Semilight", sans-serif;
        opacity: 0.85;
      }
    </style>
  `;

  // ====================================
  //         AUTO-FIT AGRESIVO
  // ====================================
  const caja = el.querySelector("#textoAutoFitLocal");

  let min = 20;
  let max = 900;
  let best = min;

  const maxW = el.clientWidth * 0.95;
  const maxH = el.clientHeight * 0.92;

  while (min <= max) {
    let mid = Math.floor((min + max) / 2);
    caja.style.fontSize = mid + "px";

    const fits =
      caja.scrollWidth <= maxW &&
      caja.scrollHeight <= maxH;

    if (fits) {
      best = mid;
      min = mid + 2;
    } else {
      max = mid - 2;
    }
  }

  caja.style.fontSize = best + "px";
}

  


  
  
function abrirProyeccionDia() {
  cerrarMenu();
  document.getElementById("modalProyeccion").style.display = "flex";
  cargarCronogramaProyeccion();
}

function cerrarProyeccion() {
  document.getElementById("modalProyeccion").style.display = "none";
}

// Cerrar al tocar afuera
document.getElementById("modalProyeccion").addEventListener("click", function(e) {
  if (e.target === this) cerrarProyeccion();
});

// VARIABLES GLOBALES CON CACH√â (una sola vez en todo tu script)
let datosCompletos = [];        // ‚Üê Cache de todos los datos
let ultimaActualizacion = null; // ‚Üê Para saber cu√°ndo se carg√≥ por √∫ltima vez

async function cargarCronogramaProyeccion(filtroPersona = null) {
  const contenido = document.getElementById("proyeccionContenido");

  // SI YA TENEMOS DATOS Y NO ES UN FILTRO NUEVO ‚Üí CARGAR DESDE CACH√â (INSTANT√ÅNEO)
  if (datosCompletos.length > 0 && !filtroPersona) {
    contenido.innerHTML = "Cargando desde cach√©...";
  } else if (datosCompletos.length === 0) {
    contenido.innerHTML = "Cargando cronograma...";
  }

  try {
    // SOLO HACEMOS FETCH SI NO TENEMOS DATOS
    if (datosCompletos.length === 0) {
      const res = await fetch(URL_PROYECCION + "?t=" + Date.now());
      const json = await res.json();

      if (!json.data || json.data.length === 0) {
        contenido.innerHTML = "<div style='text-align:center;color:#ff6b6b;padding:50px;font-size:18px'>No hay asignaciones en el cronograma</div>";
        return;
      }

      // GUARDAMOS EN CACH√â
      datosCompletos = json.data;
      ultimaActualizacion = new Date().toLocaleTimeString();
    }

    const hoy = new Date().toISOString().slice(0,10);
    let datosMostrados = filtroPersona 
      ? datosCompletos.filter(item => item.persona === filtroPersona) 
      : datosCompletos;

    // Actualizamos el t√≠tulo
    const titulo = document.querySelector("#modalProyeccion h2");
    if (filtroPersona) {
      titulo.innerHTML = `Proyecciones de: <span style="color:var(--acento);font-weight:900">${filtroPersona}</span>`;
    } else {
      titulo.textContent = "Cronograma de Proyecci√≥n";
    }

    // Ajuste autom√°tico del ancho
    let nombreMasLargo = 0;
    datosMostrados.forEach(item => {
      if (item.persona.length > nombreMasLargo) nombreMasLargo = item.persona.length;
    });
    const anchoBase = 620;
    const anchoExtra = nombreMasLargo > 25 ? (nombreMasLargo - 25) * 10 : 0;
    const anchoFinal = Math.min(anchoBase + anchoExtra, 1000);
    const modalInterno = document.querySelector("#modalProyeccion > div");
    if (modalInterno) {
      modalInterno.style.maxWidth = anchoFinal + "px";
      modalInterno.style.width = "95%";
    }

    let tabla = `
      <table style="width:100%;border-collapse:collapse;font-size:17.5px;border-radius:16px;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,0.4);table-layout:auto">
        <thead style="background:var(--acento);position:sticky;top:0;z-index:10">
          <tr>
            <th style="padding:20px 16px;text-align:left;color:white;font-weight:800;font-size:18.5px;width:38%">Fecha</th>
            <th style="padding:20px 16px;text-align:center;color:white;font-weight:800;font-size:18.5px;width:18%">D√≠a</th>
            <th style="padding:20px 16px;text-align:left;color:white;font-weight:800;font-size:18.5px">Hermano(a)</th>
          </tr>
        </thead>
        <tbody>`;

    datosMostrados.forEach(item => {
      const fechaISO = item.fechaRaw ? new Date(item.fechaRaw).toISOString().slice(0,10) : "";
      const esHoy = fechaISO === hoy;

      let fechaFormateada = item.fecha;
      if (item.fechaRaw) {
        const fecha = new Date(item.fechaRaw);
        fechaFormateada = fecha.toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });
      }

      const clickable = !filtroPersona ? `cursor:pointer;user-select:none;` : '';
      const onclick = !filtroPersona ? `onclick="cargarCronogramaProyeccion('${item.persona.replace(/'/g, "\\'")}')"` : '';

      tabla += `
        <tr style="border-bottom:1px solid rgba(255,255,255,0.15);${esHoy?'background:var(--fila-sel);font-weight:800':''}">
          <td style="padding:18px 16px;color:${esHoy?'#ffffff':'#e0e0e0'};white-space:normal;line-height:1.4;overflow-wrap:break-word">
            ${fechaFormateada}
          </td>
          <td style="padding:18px 16px;text-align:center;color:${esHoy?'#ffffff':'#bbbbbb'}">${item.dia}</td>
          <td style="padding:18px 16px;color:${esHoy?'#ffffff':'#ffffff'};white-space:nowrap;${clickable}" ${onclick}>
            ${!filtroPersona ? `<span style="border-bottom:2px dotted var(--acento);padding-bottom:2px">${item.persona}</span>` : item.persona}
          </td>
        </tr>`;
    });

    tabla += `</tbody></table>`;

    // Bot√≥n volver + mensaje final
    if (filtroPersona) {
      tabla += `
        <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px">
          <div onclick="cargarCronogramaProyeccion()" style="cursor:pointer;padding:14px;border-radius:50%;transition:all .3s;display:flex;align-items:center;justify-content:center"
               onmouseover="this.style.background='rgba(255,255,255,0.12)'"
               onmouseout="this.style.background='transparent'">
            <i class="fas fa-arrow-left" style="font-size:24px;color:var(--acento)"></i>
          </div>
          <div style="background:var(--fila-sel);color:var(--acento);border:1.8px solid var(--acento);border-radius:16px;padding:18px;font-weight:700;font-size:16px;text-align:center;flex:1">
            ${datosMostrados.length} proyecciones de ${filtroPersona}
          </div>
        </div>`;
    } else {
      tabla += `
        <div style="background:var(--fila-sel);color:var(--acento);border:1.8px solid var(--acento);border-radius:16px;padding:18px;font-weight:700;font-size:16px;text-align:center;margin-top:24px">
          ${datosMostrados.length} asignaciones cargadas correctamente
          ${ultimaActualizacion ? `<small style="display:block;margin-top:6px;opacity:0.7;font-size:13px">√öltima actualizaci√≥n: ${ultimaActualizacion}</small>` : ''}
        </div>`;
    }

    contenido.innerHTML = tabla;

  } catch (err) {
    contenido.innerHTML = "<div style='text-align:center;color:#ff4444;padding:50px;font-size:18px;background:rgba(255,0,0,0.1);border-radius:16px'>Error de conexi√≥n<br><small style='opacity:0.8'>Revisa tu internet o contacta a DEHETRONICS</small></div>";
  }
}


  

function abrirMenu() {
  document.getElementById("menuLateral").style.right = "0";
  document.getElementById("menuOverlay").style.opacity = "1";
  document.getElementById("menuOverlay").style.visibility = "visible";
}
function cerrarMenu() {
  document.getElementById("menuLateral").style.right = "-380px";
  document.getElementById("menuOverlay").style.opacity = "0";
  document.getElementById("menuOverlay").style.visibility = "hidden";
}
document.getElementById("menuBtn").addEventListener("click", abrirMenu);
document.getElementById("menuOverlay").addEventListener("click", cerrarMenu);



  

// ==================== SISTEMA DE TEMAS PASTELES ====================
const temas = ["claro","oscuro","rosado","lila","beige","verde","gris","naranja"];
let temaActual = localStorage.getItem("tema") || "claro";

function aplicarTema(tema) {
  document.body.classList.remove(...temas.map(t => "tema-"+t));
  document.body.classList.add("tema-"+tema);
  localStorage.setItem("tema", tema);
}

document.getElementById("btnTema").addEventListener("click", () => {
  let indice = temas.indexOf(temaActual);
  let siguiente = temas[(indice + 1) % temas.length];
  temaActual = siguiente;
  aplicarTema(temaActual);
});

// Cargar tema guardado al iniciar
aplicarTema(temaActual);


  
function mostrarLoader(texto = "Cargando...") {
  document.getElementById("loaderTexto").textContent = texto;
  document.getElementById("loaderContenedor").classList.add("activo");
}
function ocultarLoader() {
  document.getElementById("loaderContenedor").classList.remove("activo");
}
  
// ============================================================
// AVISO MODERNO PERSONALIZADO (reemplaza alert())
// ============================================================
function mostrarAviso(mensaje, tipo = "info", titulo = null) {
  const contenedor = document.getElementById("avisoContenedor");
  const aviso = document.getElementById("aviso");
  const icono = document.getElementById("avisoIcono");
  const tituloEl = document.getElementById("avisoTitulo");
  const mensajeEl = document.getElementById("avisoMensaje");

  // Tipos disponibles: exito, info, alerta, error
  const iconos = {
    exito:  "fa-solid fa-circle-check",
    info:   "fa-solid fa-circle-info",
    mostrarAvisoa: "fa-solid fa-triangle-exclamation",
    error:  "fa-solid fa-circle-xmark"
  };

  aviso.className = "aviso " + tipo; // ya no hace falta nada m√°s, el tema se aplica solo
  icono.className = iconos[tipo] || iconos.info;
  tituloEl.textContent = titulo || (tipo === "exito" ? "¬°√âxito!" : tipo === "error" ? "Error" : tipo === "alerta" ? "Atenci√≥n" : "Aviso");
  mensajeEl.textContent = mensaje;

  contenedor.classList.add("mostrar");

  // Auto-cerrar despu√©s de 5 segundos (opcional, puedes quitarlo si no quieres)
  clearTimeout(contenedor.timeout);
  contenedor.timeout = setTimeout(cerrarAviso, 5000);
}

function cerrarAviso() {
  document.getElementById("avisoContenedor").classList.remove("mostrar");
}

  
// ============================================================
// DETECTAR PANTALLAS ‚Äì VERSI√ìN 100% SIN TEMBLOR NI PARPADEO
// ============================================================
async function detectarPantallas() {
  const combo = document.getElementById("pantallaSelect");

  // 1. Mostrar "Cargando..." sin tocar innerHTML completo
  if (combo.options.length === 1 && combo.options[0].text === "Selecciona pantalla") {
    combo.options[0].text = "Cargando...";
  } else {
    combo.innerHTML = "<option>Cargando...</option>";
  }
  combo.disabled = true;

  if (!("getScreenDetails" in window)) {
    combo.innerHTML = "<option>No compatible (activa flags)</option>";
    combo.disabled = false;
    return;
  }

  try {
    const details = await window.getScreenDetails();

    // Limpiar opciones sin provocar reflow masivo
    combo.options.length = 0; // ‚Üê esto es mucho m√°s eficiente que innerHTML = ""

    const pantallasOrdenadas = [...details.screens].sort((a, b) => {
      if (a.isPrimary) return -1;
      if (b.isPrimary) return 1;
      return 0;
    });

    let indicePrincipal = 0;

    pantallasOrdenadas.forEach((screen, index) => {
      const opt = new Option(
        screen.isPrimary ? "Pantalla Principal" : `Pantalla ${index + 1}`,
        index
      );
      combo.add(opt);
      if (screen.isPrimary) indicePrincipal = index;
    });

    combo.selectedIndex = indicePrincipal;

  } catch (error) {
    combo.options.length = 0;
    combo.add(new Option("Error: Permiso denegado", ""));
    console.warn("Screen Details denegado:", error);
  }

  combo.disabled = false;
}

// ============================================================
// Cargar combo meses con el mes actual seleccionado y al principio
// ============================================================
const selectMes = document.getElementById("selectMes");
const mesActualNombre = meses[new Date().getMonth()];

const optActual = document.createElement("option");
optActual.value = mesActualNombre;
optActual.textContent = mesActualNombre;
optActual.selected = true;
selectMes.appendChild(optActual);

meses.forEach(m => {
  if (m !== mesActualNombre) {
    const opt = document.createElement("option");
    opt.value = m;
    opt.textContent = m;
    selectMes.appendChild(opt);
  }
});

// T√≠tulo grande
document.getElementById("mesActual").textContent = mesActualNombre;

document.getElementById("mesActual").textContent = meses[new Date().getMonth()];

// ============================================================
// Cargar datos
// ============================================================
// ============================================================
// CARGAR MES (con loader + manejo de errores)
// ============================================================
async function cargarMes(mes) {
  mostrarLoader(`Cargando ${mes}...`);

  try {
    let url = `${URL}?accion=listar&mes=${encodeURIComponent(mes)}`;
    let res = await fetch(url);

    if (!res.ok) throw new Error("Error en la respuesta del servidor");

    let data = await res.json();
    pintarTabla(data);
    document.getElementById("mesActual").textContent = mes;
  } catch (err) {
    console.error(err);
    mostrarAviso("No se pudo cargar el mes. Revisa tu conexi√≥n.", "error");
  } finally {
    ocultarLoader();
  }
}

// ============================================================
// PINTAR TABLA (sin cambios, solo la dejamos igual)
// ============================================================
function pintarTabla(data) {
  const thead = document.querySelector("#tabla thead");
  const tbody = document.querySelector("#tabla tbody");
  thead.innerHTML = "";
  tbody.innerHTML = "";
  filaSeleccionada = null;

  if (!data || data.length === 0) {
    tbody.innerHTML = "<tr><td colspan='8'>No se ha subido la asistencia de hoy</td></tr>";
    return;
  }

  let headers = data[0];
  thead.innerHTML = "<tr>" + headers.map(h => `<th>${h}</th>`).join("") + "</tr>";
  for (let i = 1; i < data.length; i++) {
    tbody.innerHTML += "<tr>" + data[i].map(cell => `<td>${cell}</td>`).join("") + "</tr>";
  }
}

// ============================================================
// SELECCIONAR FILA (sin cambios)
// ============================================================
document.getElementById("tabla").addEventListener("click", (e) => {
  const tr = e.target.closest("tr");
  if (!tr || tr.querySelector("th")) return;
  document.querySelectorAll(".filaSel").forEach(r => r.classList.remove("filaSel"));
  filaSeleccionada = tr;
  tr.classList.add("filaSel");
});

// ============================================================
// VER MES ACTUAL (con loader)
// ============================================================
function verMesActual() {
  yaEstaHoyCargado = true;
  if (intervaloPolling) {
    clearInterval(intervaloPolling);
    intervaloPolling = null;
  }
  cargarMes(meses[new Date().getMonth()]);
}

// ============================================================
// VER HOY (con loader + aviso autom√°tico bonito)
// ============================================================
async function verHoy() {
  yaEstaHoyCargado = true;
  if (intervaloPolling) {
    clearInterval(intervaloPolling);
    intervaloPolling = null;
  }

  mostrarLoader("Buscando asistencia de hoy...");

  try {
    let mes = meses[new Date().getMonth()];
    let url = `${URL}?accion=listar&mes=${mes}`;
    let res = await fetch(url);

    if (!res.ok) throw new Error("Error del servidor");

    let data = await res.json();
    const hoy = new Date().toLocaleDateString("es-CO");
    let filtrados = data.filter(row => row[1] && row[1].includes(hoy));

    if (filtrados.length > 0) filtrados.unshift(data[0]);

    document.getElementById("mesActual").textContent = "Hoy";
    pintarTabla(filtrados);

    // Si se llam√≥ desde el polling autom√°tico ‚Üí aviso bonito
    if (window.llamadoDesdePolling) {
      mostrarAviso("¬°La asistencia de hoy ya fue cargada! Se actualiz√≥ autom√°ticamente.", "exito");
      window.llamadoDesdePolling = false;
    }
  } catch (err) {
    console.error(err);
    mostrarAviso("Error al buscar la asistencia de hoy", "error");
  } finally {
    ocultarLoader();
  }
}


// === CARGA AUTOM√ÅTICA AL CAMBIAR EL MES ===
document.getElementById("selectMes").addEventListener("change", function() {
  const mes = this.value;
  yaEstaHoyCargado = true;                // evita polling si el usuario cambia manualmente
  if (intervaloPolling) {
    clearInterval(intervaloPolling);
    intervaloPolling = null;
  }
  cargarMes(mes);                          // carga inmediata
});

  

// ============================================================
// PROYECCI√ìN MODERNA ‚Äì CON AUTO-SELECCI√ìN CUANDO HAY UNA SOLA FILA
// ============================================================
async function proyectar() {
  const btn = document.querySelector("button[onclick='proyectar()']");
  if (ventanaProyeccion && !ventanaProyeccion.closed) {
    ventanaProyeccion.close();
    ventanaProyeccion = null;
    btn.textContent = "Proyectar";
    btn.classList.remove("boton-detener");
    return;
  }

  const filasDatos = document.querySelectorAll("#tabla tbody tr");
  if (filasDatos.length === 1) {
    filaSeleccionada = filasDatos[0];
    filasDatos[0].classList.add("filaSel");
  }
  if (!filaSeleccionada) {
    mostrarAviso("Selecciona una fila antes de proyectar.");
    return;
  }

  let headers = [...document.querySelectorAll("#tabla thead th")].map(th => th.innerText);
  let valores = [...filaSeleccionada.querySelectorAll("td")].map(td => td.innerText);

  let inicio = headers.findIndex(h => /hermano/i.test(h));
  let fin = headers.findIndex(h => /total/i.test(h));

  // VALIDACI√ìN: si no encuentra "Hermanos" o "Total", o el total est√° vac√≠o
  if (inicio === -1 || fin === -1 || fin <= inicio) {
    mostrarAviso("Error en los datos: No se encontr√≥ la asistencia de hoy.", "error");
    return;
  }

  const totalAsistencia = valores[fin]?.trim();
  if (!totalAsistencia || totalAsistencia === "" || totalAsistencia === "undefined") {
    mostrarAviso("No se puede proyectar: El Total de asistencia no est√° disponible.", "alerta");
    return;
  }

  let scr = null;
  if ("getScreenDetails" in window) {
    try {
      const details = await window.getScreenDetails();
      const indexPantalla = parseInt(document.getElementById("pantallaSelect").value);
      if (!isNaN(indexPantalla) && details.screens[indexPantalla]) {
        scr = details.screens[indexPantalla];
      }
    } catch (e) { }
  }

  const features = scr
    ? `left=${scr.left},top=${scr.top},width=${scr.width},height=${scr.height}`
    : `width=1200,height=700`;

  ventanaProyeccion = window.open("", "proyeccion", features);

  const headersSinTotal = headers.slice(inicio, fin);
  const valoresSinTotal = valores.slice(inicio, fin);

  let fechaFila = valores[1] ? valores[1].trim() : "Fecha no disponible";
  function formatearFechaLarga(fechaTexto) {
    try {
      let soloFecha = fechaTexto.split(" ")[0];
      let [dia, mes, anio] = soloFecha.split("/").map(n => parseInt(n));
      const meses = ["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];
      const diasSemana = ["domingo","lunes","martes","mi√©rcoles","jueves","viernes","s√°bado"];
      const fechaObj = new Date(anio, mes - 1, dia);
      const diaSemana = diasSemana[fechaObj.getDay()];
      return `${diaSemana.charAt(0).toUpperCase() + diaSemana.slice(1)} ${dia} de ${meses[mes - 1]} de ${anio}`;
    } catch (e) {
      return fechaTexto;
    }
  }
  fechaFila = formatearFechaLarga(fechaFila);

  const actualizarProyeccion = () => {
    if (!ventanaProyeccion || ventanaProyeccion.closed) return;
    const vars = {
      fondo: getComputedStyle(document.body).getPropertyValue('--fondo').trim(),
      acento: getComputedStyle(document.body).getPropertyValue('--acento').trim(),
      texto: getComputedStyle(document.body).getPropertyValue('--texto').trim()
    };
    const esOscuro = document.body.classList.contains("tema-oscuro");
    ventanaProyeccion.document.body.innerHTML = `
      <style>
        :root{--fondo:${vars.fondo};--acento:${vars.acento};--texto:${vars.texto}}
        html,body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background:var(--fondo);font-family:'Segoe UI',sans-serif;color:var(--texto);transition:all .5s ease}
        .wrap{width:100%;height:100%;display:flex;justify-content:center;align-items:center}
        .contenedor{
          width:96%;max-width:1400px;min-height:78%;max-height:90%;padding:28px 32px;
          background:rgba(255,255,255,${esOscuro?'0.06':'0.10'});border-radius:24px;
          border:1px solid rgba(255,255,255,0.12);backdrop-filter:blur(12px);
          box-shadow:0 20px 60px rgba(0,0,0,${esOscuro?'0.6':'0.3'});
          display:flex;flex-direction:column;align-items:center;gap:20px;
          animation:entrada .7s cubic-bezier(0.34,1.56,0.64,1);justify-content:space-between;
          margin-bottom:2vh
        }
        h1{font-size:clamp(32px,5vw,80px);font-weight:900;margin:0;
           background:linear-gradient(135deg,var(--acento),color-mix(in srgb,var(--acento) 70%,white));
           -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
           letter-spacing:1.2px}
        .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:24px;width:100%}
        .card{
          background:rgba(255,255,255,${esOscuro?'0.08':'0.12'});border-radius:18px;
          padding:24px 16px;text-align:center;box-shadow:0 8px 25px rgba(0,0,0,${esOscuro?'0.4':'0.2'});
          border:1px solid rgba(255,255,255,0.1);transition:all .3s;display:flex;
          flex-direction:column;justify-content:center;min-height:140px
        }
        .card:hover{transform:translateY(-8px);box-shadow:0 16px 40px rgba(0,0,0,${esOscuro?'0.6':'0.35'})}
        .titulo{font-size:clamp(18px,2.8vw,22px);text-transform:uppercase;font-weight:800;letter-spacing:2.4px;color:var(--acento);opacity:0.95;margin-bottom:6px}
        .valor{font-size:clamp(56px,9.5vw,160px);font-weight:900;color:var(--texto);line-height:1;margin:0}
        .total-final{margin-top:auto;padding:20px 48px;background:linear-gradient(135deg,var(--acento),color-mix(in srgb,var(--acento) 80%,black));color:white;border-radius:28px;box-shadow:0 16px 50px rgba(0,0,0,0.6);text-align:center;display:flex;flex-direction:column;gap:6px;margin-bottom:1vh}
        .total-numero{font-size:clamp(80px,12vw,220px);font-weight:900;line-height:1;letter-spacing:-2px}
        .total-texto{font-size:clamp(24px,3.5vw,48px);font-weight:700;opacity:0.9;letter-spacing:2px}
        @keyframes entrada{from{opacity:0;transform:scale(0.94) translateY(30px)}to{opacity:1;transform:none}}
        @media(max-width:768px){.grid{grid-template-columns:repeat(2,1fr)};.contenedor{padding:20px}}
      </style>
      <div class="wrap"><div class="contenedor">
        <h1>${fechaFila}</h1>
        <div class="grid">
          ${headersSinTotal.map((h,i) => `<div class="card"><div class="titulo">${h}</div><div class="valor">${valoresSinTotal[i]}</div></div>`).join("")}
        </div>
        <div class="total-final">
          <div class="total-numero">${totalAsistencia}</div>
          <div class="total-texto">Total</div>
        </div>
      </div></div>
    `;
  };

  actualizarProyeccion();

  const observer = new MutationObserver(actualizarProyeccion);
  observer.observe(document.body, { attributes: true, attributeFilter: ["class"] });

  btn.textContent = "Detener";
  btn.classList.add("boton-detener");

  const timer = setInterval(() => {
    if (!ventanaProyeccion || ventanaProyeccion.closed) {
      clearInterval(timer);
      observer.disconnect();
      ventanaProyeccion = null;
      btn.textContent = "Proyectar";
      btn.classList.remove("boton-detener");
    }
  }, 500);
}

// ============================================================
// CARGA AUTOM√ÅTICA INTELIGENTE AL INICIAR LA P√ÅGINA
// ============================================================
async function cargarAlIniciar() {
  const hoy = new Date().toLocaleDateString("es-CO");
  const mesActual = meses[new Date().getMonth()];

  try {
    let res = await fetch(`${URL}?accion=listar&mes=${mesActual}`);
    let data = await res.json();

    const filaHoy = data.find(row => Array.isArray(row) && row[1] && row[1].includes(hoy));

    if (filaHoy) {
      // Ya existe hoy ‚Üí mostramos solo hoy y marcamos bandera
      yaEstaHoyCargado = true;
      const filtrados = [data[0]];
      data.forEach(row => {
        if (Array.isArray(row) && row[1] && row[1].includes(hoy)) filtrados.push(row);
      });
      document.getElementById("mesActual").textContent = "Hoy";
      pintarTabla(filtrados);
    } else {
      // No hay hoy ‚Üí mostramos el mes completo
      document.getElementById("mesActual").textContent = mesActual;
      pintarTabla(data);

      // === AQU√ç EMPIEZA EL POLLING AUTOM√ÅTICO ===
      if (!intervaloPolling) {
        intervaloPolling = setInterval(verificarSiYaSubieronAsistenciaDeHoy, 30000); // cada 30 segundos
        console.log("Polling activado: revisando cada 30 seg si subieron la asistencia de hoy");
      }
    }
  } catch (err) {
    console.error("Error al cargar al iniciar:", err);
    cargarMes(mesActual);
  }
}


// ============================================================
// FUNCI√ìN QUE REVISA CADA CIERTO TIEMPO SI YA SUBIERON LA ASISTENCIA DE HOY
// ============================================================
async function verificarSiYaSubieronAsistenciaDeHoy() {
  if (yaEstaHoyCargado) return; // Ya la tenemos ‚Üí no hacemos nada m√°s

  const hoy = new Date().toLocaleDateString("es-CO");
  const mesActual = meses[new Date().getMonth()];

  try {
    let res = await fetch(`${URL}?accion=listar&mes=${mesActual}`);
    let data = await res.json();

    // Buscamos si existe alguna fila con la fecha de hoy
    const existeHoy = data.some(row => 
      Array.isArray(row) && row[1] && row[1].includes(hoy)
    );

    if (existeHoy) {
      // ¬°¬°APARECI√ì LA ASISTENCIA DE HOY!!
      yaEstaHoyCargado = true;
      clearInterval(intervaloPolling);   // detenemos el polling
      intervaloPolling = null;

      window.llamadoDesdePolling = true;  // bandera para saber que viene del polling
await verHoy();                  // mostramos autom√°ticamente "Hoy"
      document.getElementById("mesActual").textContent = "Hoy"; // por si acaso
      
    }
  } catch (err) {
    console.warn("Error en polling de asistencia hoy:", err);
    // No hacemos nada, sigue intentando en el pr√≥ximo ciclo
  }
}

  
document.addEventListener("DOMContentLoaded", () => {
  detectarPantallas();

  const tablaArriba = document.getElementById("tabla");

  // Ocultar ambas secciones al iniciar
  document.getElementById("subtitulo").style.display = "none";
  document.querySelector(".panel").style.display = "none";  
  document.getElementById("biblia-container").style.display = "flex";
  tablaArriba.style.display = "none"; 

  // BOT√ìN: CARGAR ASISTENCIA
  document.getElementById("btnCargarAsistencia").addEventListener("click", () => {
    document.getElementById("subtitulo").style.display = "flex";
    document.querySelector(".panel").style.display = "flex";
    document.getElementById("biblia-container").style.display = "none";
    tablaArriba.style.display = "table";
    cargarAlIniciar();

    // ‚úÖüî• MOSTRAR TODOS LOS BOTONES AL ENTRAR A ASISTENCIA
    document.querySelector('button[onclick="verMesActual()"]').style.display = "inline-flex";
    document.querySelector('button[onclick="verHoy()"]').style.display = "inline-flex";
    document.getElementById("selectMes").style.display = "inline-flex";
    document.querySelector('button[onclick="proyectar()"]').style.display = "inline-flex";
    document.getElementById("pantallaSelect").style.display = "inline-flex";
    document.getElementById("btnTema").style.display = "inline-flex";
  });



  // BOT√ìN: BIBLIA
  document.getElementById("btnBiblia").addEventListener("click", () => {
    document.getElementById("subtitulo").style.display = "none";
    document.querySelector(".panel").style.display = "flex";  
    document.getElementById("biblia-container").style.display = "flex";
    tablaArriba.style.display = "none";

    // üî• Ocultar los botones que NO van en Biblia:
    document.querySelector('button[onclick="verMesActual()"]').style.display = "none";
    document.querySelector('button[onclick="verHoy()"]').style.display = "none";
    document.getElementById("selectMes").style.display = "none";
    document.querySelector('button[onclick="proyectar()"]').style.display = "none";

    // üî• Mostrar solo estos dos:
    document.getElementById("pantallaSelect").style.display = "inline-flex";
    document.getElementById("btnTema").style.display = "inline-flex";
  });



  // üî• Mostrar Biblia autom√°ticamente al abrir
  document.getElementById("btnBiblia").click();
});







</script>
</body>
</html>

